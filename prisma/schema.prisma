// prisma/schema.prisma

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL_XPLORA")
}

generator client {
  provider = "prisma-client-js"
}

model Tour {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  title        String
  slug         String   @unique
  type         String   // circuit | excursion | day-tour | custom
  duration     String?
  cities       String[] // cities/regions
  fromPrice    Float?
  languages    String[] // ["en", "fr", "it", "es"]
  highlights   String[]
  itinerary    String?  // rich text summary
  details      String?
  includes     String[]
  excludes     String[]
  packageDays  Json?    // array of { day: number, title: string, description: string, image?: string }
  images       String[]
  availability String?
  rating       Float? @default(0)
  reviews      Review[]
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Review {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  tourId    String   @db.ObjectId
  author    String
  comment   String
  rating    Int
  createdAt DateTime @default(now())

  @@index([tourId])
}
